@model Usuario
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AdminLTE 3 | Log in (v2)</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="../../plugins/fontawesome-free/css/all.min.css">
    <!-- icheck bootstrap -->
    <link rel="stylesheet" href="../../plugins/icheck-bootstrap/icheck-bootstrap.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="../../dist/css/adminlte.min.css">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- jQuery Inputmask -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.6/jquery.inputmask.min.js"></script>

</head>
<body class="hold-transition login-page">
    <div class="login-box" style="width:40rem;">
        <img src="../../dist/img/logo_bravoizquierdo.jpg" alt="Logo Bravo Izquierdo" class="img-thumbnail">
        <!-- Input addon -->
        <div class="card card-info">
            <div class="card-header" style="background-color: #8a0602;">
                <h3 class="card-title" style="text-align: center;">BI DHR - Establecer Nueva Contraseña</h3>
            </div>
            <div class="card-body">
                <form id="formularioNuevaContrasenia" method="post" asp-action="RecuperarContrasena" asp-controller="Usuarios">
                    <!-- Campo oculto para el ID del usuario -->
                    <input type="hidden" name="UsuarioId" value="@Model.UsuarioId">

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fas fa-lock"></i></span>
                        </div>
                        <input type="password" name="Contrasena" class="form-control" placeholder="Nueva Contraseña" required>
                    </div>

@*                     <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text"><i class="fas fa-lock"></i></span>
                        </div>
                        <!-- Este campo no será utilizado directamente en el modelo Usuario, pero es útil para la validación en el cliente -->
                        <input type="password" name="ConfirmarContrasena" class="form-control" placeholder="Confirmar Nueva Contraseña" required>
                    </div> *@

                    <div class="row">
                        <div class="col-auto">
                            <button type="submit" class="btn btn-danger btn-lg">Cambiar Contraseña</button>
                        </div>
                        <div class="col-auto">
                            <a href="@Url.Action("Login", "Usuarios")" class="btn btn-light btn-lg">Volver</a>
                        </div>
                    </div>
                    <label>©BI DHR - Made by DuocUC</label>
                </form>

            </div>
            <!-- /.card-body -->
        </div>
    </div>



    <style>
        label {
            display: block;
            text-align: center;
            color: #7a7a7a;
        }
    </style>



    @{
        if (TempData["MostrarAlerta"] != null && TempData["MostrarAlerta"].ToString() == "true")
        {
            <script>
                Swal.fire({
                    title: 'Correo Enviado',
                    text: 'Se ha enviado un correo de recuperación a tu dirección de correo electrónico.',
                    icon: 'success',
                    confirmButtonText: 'Ok'
                });
            </script>
        }
    }
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var formulario = document.getElementById("formularioRecuperacion");
            formulario.addEventListener("submit", function (e) {
                var campoCorreo = document.getElementsByName("correo")[0];
                if (!campoCorreo.checkValidity()) {
                    e.preventDefault(); // Detener el envío del formulario
                    Swal.fire({ // Usar SweetAlert para mostrar la alerta
                        title: 'Error',
                        text: 'Por favor, ingresa un correo electrónico válido.',
                        icon: 'error',
                        confirmButtonText: 'Ok'
                    });
                }
            });
        });
    </script>

    <!-- jQuery -->
    <script src="../../plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../../dist/js/adminlte.min.js"></script>
</body>
</html>